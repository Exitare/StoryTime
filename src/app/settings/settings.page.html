<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-title>
            {{ 'SETTINGS' | translate }}
        </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">{{ 'SETTINGS' | translate }}</ion-title>
        </ion-toolbar>
    </ion-header>

    <ion-grid>
        <ion-row>
            <ion-col size="12" size-md="8" offset-md="2">
                <ion-list lines="inset">
                    <ion-list-header>
                        <ion-label>{{ 'PERSONAL' | translate }}</ion-label>

                    </ion-list-header>
                    <ion-item [button]="true" (click)="openNotificationsMenu()">
                        <ion-label>{{ "LOCAL_NOTIFICATIONS.NOTIFICATIONS" | translate }}</ion-label>
                        <ion-note slot="end">{{notificationTime}}</ion-note>
                    </ion-item>
                    <ion-item>
                        <ion-toggle justify="space-between" [(ngModel)]="ageRestrictionCheckbox"
                                    (ionChange)="noAgeRestriction($event)">{{ 'AGE_RESTRICTION' | translate }}
                        </ion-toggle>
                    </ion-item>
                    <ion-item *ngIf="ageRestrictionCheckbox">

                        <form [formGroup]="ageForm" #formAge="ngForm" *ngIf="ageForm">
                            <ion-input type="number" formControlName="age" label-placement="stacked"
                                       label=""
                                       placeholder="{{'AGE' | translate}}"></ion-input>

                            <!-- Error messages -->
                            <ion-text color="danger"
                                      *ngIf="age?.invalid && (age?.dirty || age?.touched)">
                                <p class="ion-padding-start">
                                    <small *ngIf="age?.errors?.['required']"> {{ 'AGE_FORM.REQUIRED_ERROR' | translate }} </small>
                                    <small *ngIf="age?.errors?.['min']">{{ 'AGE_FORM.MIN_ERROR' | translate }} </small>
                                    <small *ngIf="age?.errors?.['max']"> {{ 'AGE_FORM.MAX_ERROR' | translate }} </small>
                                </p>
                            </ion-text>

                        </form>
                    </ion-item>

                    <ion-list-header>
                        <ion-label>{{ "LANGUAGE" | translate }}</ion-label>
                    </ion-list-header>
                    <ion-item *ngFor="let language of availableLanguages" (click)="userLanguageChanged(language)">
                        <ion-label>{{ 'LANGUAGES.' + language | uppercase | translate }}</ion-label>
                        <ion-icon slot="end" *ngIf="userSelectedLanguage.includes(language)"
                                  name='checkmark'></ion-icon>
                        <ion-icon slot="end" *ngIf="!userSelectedLanguage.includes(language)"
                                  name=''></ion-icon>

                    </ion-item>

                    <ion-list-header>
                        <ion-label>{{ "CATEGORIES.BASE" | translate }}</ion-label>
                        <ion-button (click)="resetCategories()">Reset</ion-button>
                    </ion-list-header>
                    <ion-item *ngFor="let category of availableCategories"
                              (click)="!userSelectedCategories.includes(category) ? selectCategory(category) : deselectCategory(category)">
                        <ion-label>{{ 'CATEGORIES.' + category | uppercase | replaceCharacter : ' ' | translate }}</ion-label>
                        <ion-icon slot="end" *ngIf="userSelectedCategories.includes(category)"
                                  name='checkmark'></ion-icon>
                        <ion-icon slot="end" *ngIf="!userSelectedCategories.includes(category)"
                                  name=''></ion-icon>
                    </ion-item>




                    <ion-list-header>
                        <ion-label>{{ "PRIVACY" | translate }}</ion-label>
                    </ion-list-header>
                    <ion-item [button]="true" (click)="toPrivacy()">
                        <ion-label>{{ "PRIVACY_POLICY" | translate }}</ion-label>
                    </ion-item>


                </ion-list>
            </ion-col>
        </ion-row>
    </ion-grid>

</ion-content>
